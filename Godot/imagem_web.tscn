[gd_scene load_steps=12 format=3 uid="uid://bcd4o74kqdsp3"]

[ext_resource type="Script" path="res://camera_stream_texture.gd" id="1_4gi5t"]
[ext_resource type="Script" path="res://imagem_web.gd" id="1_x2def"]
[ext_resource type="Texture2D" uid="uid://dwjnu4c6sm0cb" path="res://sports_car_top_view-800x442.png" id="3_mbsv5"]
[ext_resource type="Script" path="res://car.gd" id="3_oyu73"]
[ext_resource type="Script" path="res://udp_server_rect.gd" id="3_ve22p"]
[ext_resource type="Script" path="res://tcp_server_rect.gd" id="4_n37r2"]
[ext_resource type="Script" path="res://scripts/web_socket.gd" id="7_v8nan"]

[sub_resource type="Gradient" id="Gradient_84dyv"]

[sub_resource type="GradientTexture1D" id="GradientTexture1D_ilo8w"]
gradient = SubResource("Gradient_84dyv")

[sub_resource type="Gradient" id="Gradient_xshnq"]
colors = PackedColorArray(0.384314, 0.419608, 0, 1, 1, 1, 1, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_d2iqc"]
gradient = SubResource("Gradient_xshnq")

[node name="ImagemWeb" type="Node2D"]
script = ExtResource("1_x2def")

[node name="TextureRect" type="TextureRect" parent="."]
offset_left = 23.0
offset_top = 74.0
offset_right = 561.0
offset_bottom = 470.0
texture = SubResource("GradientTexture1D_ilo8w")
script = ExtResource("1_4gi5t")

[node name="UDPServerRect" type="TextureRect" parent="."]
offset_left = 709.0
offset_top = 146.0
offset_right = 1133.0
offset_bottom = 476.0
texture = SubResource("GradientTexture1D_d2iqc")
script = ExtResource("3_ve22p")

[node name="FrameRate" type="Label" parent="UDPServerRect"]
layout_mode = 0
offset_left = 105.0
offset_top = 397.0
offset_right = 239.0
offset_bottom = 420.0
text = "frames recebidos"

[node name="TCPServerRect" type="TextureRect" parent="."]
visible = false
offset_left = 354.0
offset_top = 297.0
offset_right = 778.0
offset_bottom = 627.0
texture = SubResource("GradientTexture1D_d2iqc")
script = ExtResource("4_n37r2")

[node name="Label" type="Label" parent="."]
offset_left = 21.0
offset_top = 358.0
offset_right = 296.0
offset_bottom = 589.0
text = "Robot + Godot"
vertical_alignment = 2
autowrap_mode = 2
clip_text = true
text_overrun_behavior = 4
max_lines_visible = 6

[node name="HTTPRequest" type="HTTPRequest" parent="."]
timeout = 0.5

[node name="Button" type="Button" parent="."]
offset_left = 131.0
offset_top = 91.0
offset_right = 287.0
offset_bottom = 122.0
text = "Toggle flash"

[node name="sliderValue" type="Label" parent="."]
offset_left = 140.0
offset_top = 215.0
offset_right = 180.0
offset_bottom = 238.0
text = "sliderValue"

[node name="x speed" type="Label" parent="."]
offset_left = 43.0
offset_top = 165.0
offset_right = 129.0
offset_bottom = 188.0
text = "x speed"

[node name="HSlider" type="HSlider" parent="."]
offset_left = 133.0
offset_top = 169.0
offset_right = 340.0
offset_bottom = 185.0
min_value = -100.0

[node name="sliderValue2" type="Label" parent="."]
offset_left = 141.0
offset_top = 301.0
offset_right = 227.0
offset_bottom = 324.0
text = "sliderValue"

[node name="x speed2" type="Label" parent="."]
offset_left = 40.0
offset_top = 267.0
offset_right = 126.0
offset_bottom = 290.0
text = "y speed"

[node name="lbCarSpeed" type="Label" parent="."]
offset_left = 40.0
offset_top = 391.0
offset_right = 126.0
offset_bottom = 414.0
text = "car speed: "

[node name="CarSpeed" type="Label" parent="."]
offset_left = 149.0
offset_top = 388.0
offset_right = 235.0
offset_bottom = 411.0
text = "car speed: "

[node name="HSlider2" type="HSlider" parent="."]
offset_left = 130.0
offset_top = 271.0
offset_right = 337.0
offset_bottom = 287.0
min_value = -100.0

[node name="Car" type="Node2D" parent="."]
position = Vector2(600, 500)
script = ExtResource("3_oyu73")

[node name="CarSprite" type="Sprite2D" parent="Car"]
rotation = -1.5708
scale = Vector2(0.15, 0.15)
texture = ExtResource("3_mbsv5")

[node name="TurnRadius" type="Label" parent="Car"]
offset_left = 54.0
offset_top = -33.0
offset_right = 110.0
offset_bottom = -10.0
text = "asdkfja"

[node name="TurnSpeed" type="Label" parent="Car"]
offset_left = 54.0
offset_top = 7.0
offset_right = 110.0
offset_bottom = 30.0
text = "asdkfja"

[node name="carWebSocket" type="Node" parent="."]
script = ExtResource("7_v8nan")

[node name="reconnectTimer" type="Timer" parent="carWebSocket"]

[node name="EspFPSLabel" type="Label" parent="."]
offset_left = 816.0
offset_top = 568.0
offset_right = 902.0
offset_bottom = 591.0
text = "esp 32 fps: "

[connection signal="pressed" from="Button" to="." method="_on_button_pressed"]
[connection signal="value_changed" from="HSlider" to="." method="_on_h_slider_value_changed"]
[connection signal="value_changed" from="HSlider2" to="." method="_on_h_slider_2_value_changed"]
[connection signal="timeout" from="carWebSocket/reconnectTimer" to="carWebSocket" method="_on_reconnect_timer_timeout"]
